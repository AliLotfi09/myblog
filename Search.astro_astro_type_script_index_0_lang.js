const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ui-core.js","preload-helper.js"])))=>i.map(i=>d[i]);
import{_ as n}from"./preload-helper.js";class s extends HTMLElement{#n;#e;#s;#o;#t;constructor(){super(),this.#o=this.querySelector("button[data-open-modal]"),this.#n=this.querySelector("button[data-close-modal]"),this.#e=this.querySelector("dialog"),this.#s=this.querySelector(".dialog-frame"),this.#t=new AbortController,this.#o?(this.#o.addEventListener("click",this.openModal),this.#o.disabled=!1):console.warn("Search button not found"),this.#n?this.#n.addEventListener("click",this.closeModal):console.warn("Close button not found"),this.#e?this.#e.addEventListener("close",()=>{window.removeEventListener("click",this.onWindowClick)}):console.warn("Dialog not found"),(window.requestIdleCallback||(o=>setTimeout(o,1)))(async()=>{const{PagefindUI:o}=await n(async()=>{const{PagefindUI:t}=await import("./ui-core.js");return{PagefindUI:t}},__vite__mapDeps([0,1]));new o({baseUrl:"/",bundlePath:"/".replace(/\/$/,"")+"/pagefind/",element:"#pagefind-search",showImages:!1,showSubResults:!0})})}connectedCallback(){window.addEventListener("keydown",this.onWindowKeydown,{signal:this.#t.signal})}disconnectedCallback(){this.#t.abort()}openModal=e=>{if(!this.#e){console.warn("Dialog not found");return}document.querySelector("body")?.classList.add("overflow-hidden"),this.#e.showModal(),this.querySelector("input")?.focus(),e?.stopPropagation(),window.addEventListener("click",this.onWindowClick,{signal:this.#t.signal})};closeModal=()=>{document.querySelector("body")?.classList.remove("overflow-hidden"),this.#e?.close()};onWindowClick=e=>{("href"in(e.target||{})||document.body.contains(e.target)&&!this.#s?.contains(e.target))&&this.closeModal()};onWindowKeydown=e=>{if(!this.#e){console.warn("Dialog not found");return}(e.metaKey===!0||e.ctrlKey===!0)&&e.key==="k"&&(this.#e.open?this.closeModal():this.openModal(),e.preventDefault())}}customElements.define("site-search",s);
